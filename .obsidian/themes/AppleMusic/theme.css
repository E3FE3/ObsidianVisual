/**
 * Тема Apple Music для Obsidian
 * Вдохновлено десктопной версией Apple Music (Темная тема)
 *
 * Акцентный цвет: Огненный оранжевый (#E85D3D)
 * Автор: Jules
 */

/* ==========================================================================
   ПЕРЕМЕННЫЕ И ЦВЕТОВАЯ ПАЛИТРА
   ========================================================================== */
.theme-dark {
  /* --- Базовые цвета --- */
  --bg-1: #1E1E1E; /* Основной фон контента */
  --bg-2: #262626; /* Боковая панель / Панели */
  --bg-3: #2C2C2C; /* Карточки / Поля ввода */
  --bg-selection: rgba(232, 93, 61, 0.2);

  /* --- Маппинг Obsidian --- */
  --background-primary: var(--bg-1) !important;
  --background-primary-alt: var(--bg-2) !important;
  --background-secondary: var(--bg-2) !important;
  --background-secondary-alt: var(--bg-1) !important;
  --background-modifier-border: rgba(255, 255, 255, 0.08) !important;
  --background-modifier-form-field: var(--bg-3) !important;

  /* --- Типографика: Цвета --- */
  --text-normal: #FFFFFF !important;
  --text-muted: #98989D !important;   /* Вторичный цвет текста Apple */
  --text-faint: #636366 !important;   /* Третичный цвет текста Apple */
  --text-on-accent: #FFFFFF !important;

  /* --- Акцент --- */
  --accent-h: 11;
  --accent-s: 78%;
  --accent-l: 57%;
  --interactive-accent: #E85D3D !important;
  --interactive-accent-hover: #FF6B4A !important;
  --interactive-accent-rgb: 232, 93, 61;
  --text-accent: #E85D3D !important;
  --text-accent-hover: #FF6B4A !important;

  /* --- Размеры и отступы --- */
  --radius-s: 6px;
  --radius-m: 10px;
  --radius-l: 12px;
  --input-radius: 6px;
  --button-radius: 8px;

  /* --- Шрифты --- */
  --font-interface: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", "Roboto", "Inter", sans-serif !important;
  --font-text: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", "Roboto", "Inter", sans-serif !important;
  --font-monospace: "SF Mono", "Menlo", monospace !important;

  /* --- Тени --- */
  --shadow-s: 0 1px 2px rgba(0,0,0,0.3);
  --shadow-l: 0 10px 30px rgba(0,0,0,0.5);

  /* ==========================================================================
     ПЕРЕМЕННЫЕ ЛАУНЧЕРА (СОВМЕСТИМОСТЬ)
     Восстанавливаем переменные для работы 08-cards.css и 04-callouts.css
     ========================================================================== */
  /* === PRIMARY COLORS === */
  --launcher-accent: #E85D3D;
  --launcher-accent-hover: #FF6B4A;
  --launcher-accent-subtle: rgba(232, 93, 61, 0.08);
  --launcher-accent-glow: rgba(232, 93, 61, 0.2);

  /* === BACKGROUNDS === */
  --launcher-bg-primary: #1E1E1E; /* Согласовано с темой */
  --launcher-bg-secondary: #262626; /* Согласовано с темой */
  --launcher-bg-tertiary: #2C2C2C; /* Согласовано с темой */
  --launcher-bg-elevated: #2A2A2A;
  --launcher-bg-hover: rgba(255, 255, 255, 0.03);
  --launcher-bg-card: #252525;

  /* Glassmorphism */
  --launcher-bg-glass: rgba(37, 37, 37, 0.7);
  --launcher-bg-glass-hover: rgba(47, 47, 47, 0.8);

  /* === BORDERS === */
  --launcher-border: rgba(255, 255, 255, 0.08);
  --launcher-border-subtle: rgba(255, 255, 255, 0.04);
  --launcher-border-medium: rgba(255, 255, 255, 0.12);
  --launcher-border-hover: rgba(255, 87, 34, 0.3);
  --launcher-border-focus: var(--launcher-accent);

  /* === TEXT === */
  --launcher-text: #FFFFFF;
  --launcher-text-secondary: #B3B3B3;
  --launcher-text-muted: #8E8E93;
  --launcher-text-faint: #666666;
  --launcher-text-inverse: var(--launcher-bg-primary);

  /* === STATUS COLORS === */
  --launcher-success: #30D158;
  --launcher-info: #0A84FF;
  --launcher-warning: #FF9F0A;
  --launcher-danger: #FF453A;
  --launcher-windows: #0078D4;
  --launcher-linux: #FF6B35;
  --launcher-server: #FF5722;

  /* === SPACING === */
  --launcher-gap-2xs: 0.125rem;
  --launcher-gap-xs: 0.25rem;
  --launcher-gap-sm: 0.5rem;
  --launcher-gap-md: 0.75rem;
  --launcher-gap-lg: 1rem;
  --launcher-gap-xl: 1.5rem;
  --launcher-gap-2xl: 2rem;

  /* === BORDER RADIUS === */
  --launcher-radius-xs: 4px;
  --launcher-radius-sm: 6px;
  --launcher-radius-md: 8px;
  --launcher-radius-lg: 10px;
  --launcher-radius-xl: 12px;
  --launcher-radius-2xl: 16px;

  /* === SHADOWS === */
  --launcher-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.3);
  --launcher-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
  --launcher-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
  --launcher-shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);
  --launcher-shadow-xl: 0 12px 24px rgba(0, 0, 0, 0.6);
  --launcher-shadow-accent: 0 4px 12px var(--launcher-accent-glow);
  --launcher-shadow-accent-lg: 0 8px 24px var(--launcher-accent-glow);

  /* === TRANSITIONS === */
  --launcher-transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  --launcher-transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --launcher-transition-slow: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --launcher-transition-bounce: 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);

  /* === TYPOGRAPHY === */
  --launcher-font-sans: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --launcher-font-mono: "SF Mono", "SF Mono Regular", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --launcher-font-xs: 0.75rem;
  --launcher-font-sm: 0.875rem;
  --launcher-font-base: 1rem;
  --launcher-font-md: 1.125rem;
  --launcher-font-lg: 1.25rem;
  --launcher-font-xl: 1.5rem;
  --launcher-font-2xl: 1.875rem;
  --launcher-font-3xl: 2.25rem;
  --launcher-font-caption: var(--launcher-font-xs);
  --launcher-font-body: var(--launcher-font-base);
  --launcher-font-body-lg: var(--launcher-font-md);
  --launcher-font-heading: var(--launcher-font-xl);
  --launcher-font-display: var(--launcher-font-3xl);
  --launcher-weight-light: 300;
  --launcher-weight-regular: 400;
  --launcher-weight-medium: 500;
  --launcher-weight-semibold: 600;
  --launcher-weight-bold: 700;
  --launcher-weight-heavy: 800;
  --launcher-leading-tight: 1.25;
  --launcher-leading-snug: 1.375;
  --launcher-leading-normal: 1.5;
  --launcher-leading-relaxed: 1.625;
  --launcher-leading-loose: 1.75;
  --launcher-tracking-tight: -0.025em;
  --launcher-tracking-normal: 0;
  --launcher-tracking-wide: 0.025em;

  /* === BLUR === */
  --launcher-blur-sm: blur(8px);
  --launcher-blur-md: blur(12px);
  --launcher-blur-lg: blur(20px);
}

/* ==========================================================================
   ГЛОБАЛЬНЫЙ СБРОС (RESET)
   ========================================================================== */
body {
    line-height: 1.5;
    --link-color: var(--text-normal);
    --link-color-hover: var(--interactive-accent);
}

* {
    box-sizing: border-box;
}

:focus-visible {
    outline: 2px solid var(--interactive-accent) !important;
    outline-offset: 1px;
}

/* ==========================================================================
   СТРУКТУРА ПРИЛОЖЕНИЯ И МАКЕТ - АГРЕССИВНЫЙ СТИЛЬ
   ========================================================================== */

/* --- СКРЫТЬ ЛЕНТУ (RIBBON) --- */
/* Стиль Apple Music не предусматривает узкой полоски с иконками слева. */
.workspace-ribbon.mod-left {
    display: none !important;
}

/* --- СКРЫТЬ СТРОКУ СОСТОЯНИЯ (STATUS BAR) --- */
/* У Apple Music нет строки состояния внизу. */
.status-bar {
    display: none !important;
}

/* --- БОКОВАЯ ПАНЕЛЬ (Левая) --- */
.workspace-split.mod-left-split {
  background-color: var(--background-secondary) !important;
  border-right: 1px solid rgba(0,0,0,0.2);
}

/* Элементы навигации - "Таблетки" (Pills) */
.nav-file-title, .nav-folder-title {
  border-radius: 8px !important;
  padding: 6px 12px !important;
  margin: 2px 10px !important;
  font-size: 14px !important;
  color: var(--text-muted) !important;
  transition: all 0.2s ease;
  cursor: default;
}

.nav-file-title:hover, .nav-folder-title:hover {
  background-color: rgba(255, 255, 255, 0.05) !important;
  color: var(--text-normal) !important;
}

/* Активный файл в боковой панели */
.nav-file-title.is-active {
  background-color: var(--interactive-accent) !important; /* Насыщенный оранжевый фон */
  color: var(--text-on-accent) !important; /* Белый текст */
  font-weight: 500 !important;
}

/* Активный фолдер (если выбран) */
.nav-folder-title.is-active {
  background-color: rgba(232, 93, 61, 0.2) !important;
  color: var(--interactive-accent) !important;
}

/* Скрыть блок свойств (Metadata/Frontmatter) для чистого вида */
.metadata-container {
  display: none !important;
}

/* Заголовки в боковой панели */
.nav-folder.mod-root > .nav-folder-title {
  font-weight: 700 !important;
  text-transform: uppercase !important;
  font-size: 11px !important;
  letter-spacing: 0.05em !important;
  color: var(--text-faint) !important;
  padding-top: 16px !important;
}

/* --- ОБЛАСТЬ ОСНОВНОГО КОНТЕНТА --- */
.view-content {
  background-color: var(--background-primary) !important;
}

.markdown-source-view.mod-cm6 .cm-scroller {
    padding: 20px 40px !important;
}

/* Контейнер режима чтения */
.markdown-preview-view {
    padding: 20px 50px !important;
    max-width: 1200px;
    margin: 0 auto;
}

/* Заголовок окна (Стиль Mac / Скрытая рамка) */
.titlebar {
  background-color: var(--background-secondary) !important;
  border-bottom: 1px solid var(--background-modifier-border);
}

.view-header {
  background-color: var(--background-primary) !important;
  border-bottom: 1px solid var(--background-modifier-border) !important;
  padding: 10px 20px !important;
}

.view-header-title {
    font-size: 18px !important;
    font-weight: 600 !important;
}

/* ==========================================================================
   ТАБЛИЦЫ (Стиль списков Apple Music)
   ========================================================================== */

/* Базовая таблица - Стиль списка (List View) */
table, .dataview.table-view-table {
  width: 100% !important;
  border-collapse: collapse !important;
  border-spacing: 0 !important;
  /* Убираем рамочный стиль карточки для большего сходства с нативным списком */
  border-radius: 0 !important;
  background: transparent !important;
  border: none !important;
  margin: 20px 0 !important;
}

/* Заголовок таблицы */
thead, .table-view-thead {
    background-color: transparent !important;
    border-bottom: 1px solid rgba(255,255,255,0.15) !important;
}

th {
    padding: 12px 0 !important; /* Убираем боковые отступы заголовков для выравнивания */
    text-align: left !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    color: var(--text-muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    border-bottom: 1px solid rgba(255,255,255,0.15) !important;
    border-left: none !important;
    border-right: none !important;
}

/* Первый элемент заголовка */
th:first-child {
    padding-left: 10px !important;
}
/* Последний элемент заголовка */
th:last-child {
    padding-right: 10px !important;
}

/* Тело таблицы */
td {
    padding: 14px 0 !important;
    font-size: 14px !important;
    color: var(--text-normal) !important;
    border-bottom: 1px solid rgba(255,255,255,0.05) !important;
    border-left: none !important;
    border-right: none !important;
}

/* Первый элемент строки */
td:first-child {
    padding-left: 10px !important;
}
/* Последний элемент строки */
td:last-child {
    padding-right: 10px !important;
}

/* Убрать границу у последней строки */
tr:last-child td {
    border-bottom: none !important;
}

/* Строка при наведении */
tbody tr:hover {
    background-color: rgba(255,255,255,0.03) !important;
}

/* Ссылки внутри таблиц */
table a {
    color: var(--interactive-accent) !important;
    font-weight: 500 !important;
}

/* ==========================================================================
   ТИПОГРАФИКА И ЗАГОЛОВКИ
   ========================================================================== */

h1 { font-weight: 700; font-size: 32px !important; margin-bottom: 20px !important; color: white !important; }
h2 { font-weight: 600; font-size: 24px !important; margin-top: 30px !important; margin-bottom: 15px !important; color: white !important; }
h3 { font-weight: 600; font-size: 20px !important; color: white !important; }

/* Ссылки */
a, .cm-link, .internal-link {
  color: var(--text-normal);
  text-decoration: none !important;
  transition: color 0.2s ease;
}

a:hover, .cm-link:hover, .internal-link:hover {
  color: var(--interactive-accent) !important;
}

/* ==========================================================================
   UI КОМПОНЕНТЫ
   ========================================================================== */

/* Кнопки */
button.mod-cta {
  background-color: var(--interactive-accent) !important;
  color: white;
  font-weight: 500;
  border-radius: 8px !important;
  border: none;
}

button.mod-cta:hover {
  background-color: var(--interactive-accent-hover) !important;
}

/* Чекбоксы */
input[type="checkbox"] {
  border-radius: 4px;
  border: 1px solid var(--text-muted);
  appearance: none;
  width: 16px;
  height: 16px;
  background-color: transparent;
}

input[type="checkbox"]:checked {
  background-color: var(--interactive-accent) !important;
  border-color: var(--interactive-accent) !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 14'%3E%3Cpath fill='white' d='M3.5 7L5.5 9L10.5 4' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}

/* Полосы прокрутки */
::-webkit-scrollbar {
  width: 10px;
  background-color: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: content-box;
}

::-webkit-scrollbar-thumb:hover {
  background-color: rgba(255, 255, 255, 0.3);
}
